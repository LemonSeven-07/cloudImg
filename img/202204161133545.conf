upstream paas-web {
  server 127.0.0.1:9022 weight=5;
}

server {
  listen       9001;
  server_name  localhost;

  gzip on;
  gzip_buffers 32 4K;
  gzip_comp_level 6;
  gzip_min_length 100;
  gzip_types application/javascript text/css text/xml;
  gzip_disable "MSIE [1-6]\."; #配置禁用gzip条件，支持正则。此处表示ie6及以下不启用gzip（因为ie低版本不支持）
  gzip_vary on;

  location /paas-web {
    proxy_pass http://paas-web/;
    rewrite ^/paas-web/(.*) /$1 break;
    proxy_set_header Host $host;
    proxy_set_header X-Forward-For $remote_addr;
  }

  location /paas-ws/ {
    proxy_pass http://paas-web/;        #通过配置端口指向部署websocker的项目
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "Upgrade";
    proxy_set_header X-real-ip $remote_addr;
    proxy_set_header X-Forwarded-For $remote_addr;
  }

  location /layoutMicro/ {
    root   /bocloud/;
    try_files $uri $uri/ /layoutMicro/index.html;
  }

  location /authorityMicro/ {
    root   /bocloud/;
    try_files $uri $uri/ /authorityMicro/index.html;
  }

  location /servicetreeMicro/ {
    root   /bocloud/;
    try_files $uri $uri/ /servicetreeMicro/index.html;
  }

  location /applicationMicro/ {
    root   /bocloud/;
    try_files $uri $uri/ /applicationMicro/index.html;
  }

  location /integrateMicro/ {
    root   /bocloud/;
    try_files $uri $uri/ /integrateMicro/index.html;
  }

  location /sharedMicro/ {
    root   /bocloud/;
    try_files $uri $uri/ /sharedMicro/index.html;
  }

  location /apiGateWayMicro/ {
    root   /bocloud/;
    try_files $uri $uri/ /apiGateWayMicro/index.html;
  }

  location /apiManageMicro/ {
    root   /bocloud/;
    try_files $uri $uri/ /apiManageMicro/index.html;
  }
	
	location /onlineDebugMicro/ {
    root   /bocloud/;
    try_files $uri $uri/ /onlineDebugMicro/index.html;
  }

  location /static/ {
    root   /bocloud/;
    try_files $uri $uri/ /layoutMicro/static/index.html;
  }

  location / {
    root   /bocloud/baseMicro/;
    try_files $uri $uri/ /index.html;
  }
}
